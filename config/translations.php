<?php
// config/translations.php - Finnish Translation System

// Set default language (can be changed based on user preference or browser)
$default_language = 'fi'; // Change to 'fi' for Finnish by default, or 'en' for English

$translations = [
    'en' => [
        // Navigation
        'home' => 'Home',
        'search' => 'Search',
        'profile' => 'Profile',
        'settings' => 'Settings',
        'login' => 'Login',
        'logout' => 'Logout',
        'register' => 'Register',
        
        // Common terms
        'posts' => 'Posts',
        'post' => 'Post',
        'followers' => 'Followers',
        'following' => 'Following',
        'users' => 'Users',
        'user' => 'User',
        'hashtags' => 'Hashtags',
        'hashtag' => 'Hashtag',
        
        // Actions
        'follow' => 'Follow',
        'following_btn' => 'Following',
        'unfollow' => 'Unfollow',
        'like' => 'Like',
        'liked' => 'Liked',
        'create_post' => 'Create Post',
        'edit' => 'Edit',
        'delete' => 'Delete',
        'save' => 'Save',
        'cancel' => 'Cancel',
        'refresh' => 'Refresh',
        'load_more' => 'Load More Posts',
        
        // Time
        'just_now' => 'just now',
        'minutes_ago' => 'm ago',
        'hours_ago' => 'h ago',
        'days_ago' => 'd ago',
        'months_ago' => 'mo ago',
        'years_ago' => 'y ago',
        'login_date' => 'Login Date',
        'joined' => 'Joined',
        'first_used' => 'First used',
        'last_used' => 'Last used',
        
        // Hashtag page specific
        'posts_tagged_with' => 'Posts tagged with',
        'recent_activity' => 'Recent Activity',
        'posts_today' => 'posts today',
        'posts_this_week' => 'posts this week',
        'top_contributors' => 'Top Contributors',
        'related_hashtags' => 'Related Hashtags',
        'follow_hashtag' => 'Follow Hashtag',
        'no_posts_yet' => 'No posts yet',
        'be_first_to_post' => 'Be the first to post with',
        'recent_posts' => 'recent posts',
        
        // Post creation
        'whats_happening' => "What's happening",
        'characters_max' => '(144 characters max)',
        'create_new_post_with' => 'Create New Post with',
        'like_user' => 'Like User',
        'follow_tags' => 'Follow Tags',
        
        // Search
        'search_users' => 'Search Users',
        'search_posts' => 'Search Posts',
        'search_hashtags' => 'Search Hashtags',
        
        // Profile
        'user_profile' => 'User Profile',
        'followed_hashtags' => 'Followed Hashtags',
        'liked_users' => 'Liked Users',
        'description' => 'Description',
        
        // Messages
        'welcome_to' => 'Welcome to',
        'loading' => 'Loading...',
        'error' => 'Error',
        'success' => 'Success',
    ],
    
    'fi' => [
        // Navigation
        'home' => 'Etusivu',
        'search' => 'Hae',
        'profile' => 'Profiili',
        'settings' => 'Asetukset',
        'login' => 'Kirjaudu sisään',
        'logout' => 'Kirjaudu ulos',
        'register' => 'Rekisteröidy',
        
        // Common terms
        'posts' => 'Viestit',
        'post' => 'Viesti',
        'followers' => 'Seuraajat',
        'following' => 'Seuraa',
        'users' => 'Käyttäjät',
        'user' => 'Käyttäjä',
        'hashtags' => 'Aihetunnisteet',
        'hashtag' => 'Aihetunniste',
        
        // Actions
        'follow' => 'Seuraa',
        'following_btn' => 'Seurataan',
        'unfollow' => 'Lopeta seuraaminen',
        'like' => 'Tykkää',
        'liked' => 'Tykätty',
        'create_post' => 'Luo viesti',
        'edit' => 'Muokkaa',
        'delete' => 'Poista',
        'save' => 'Tallenna',
        'cancel' => 'Peruuta',
        'refresh' => 'Päivitä',
        'load_more' => 'Lataa lisää viestejä',
        
        // Time
        'just_now' => 'juuri nyt',
        'minutes_ago' => 'min sitten',
        'hours_ago' => 'h sitten',
        'days_ago' => 'pv sitten',
        'months_ago' => 'kk sitten',
        'years_ago' => 'v sitten',
        'login_date' => 'Kirjautumispäivä',
        'joined' => 'Liittynyt',
        'first_used' => 'Ensimmäinen käyttö',
        'last_used' => 'Viimeksi käytetty',
        
        // Hashtag page specific
        'posts_tagged_with' => 'Viestit merkitty tunnisteella',
        'recent_activity' => 'Viimeaikainen toiminta',
        'posts_today' => 'viestiä tänään',
        'posts_this_week' => 'viestiä tällä viikolla',
        'top_contributors' => 'Aktiivisimmat käyttäjät',
        'related_hashtags' => 'Liittyvät aihetunnisteet',
        'follow_hashtag' => 'Seuraa aihetunnistetta',
        'no_posts_yet' => 'Ei vielä viestejä',
        'be_first_to_post' => 'Ole ensimmäinen, joka postaa tunnisteella',
        'recent_posts' => 'tuoreinta viestiä',
        
        // Post creation
        'whats_happening' => 'Mitä tapahtuu',
        'characters_max' => '(maksimissaan 144 merkkiä)',
        'create_new_post_with' => 'Luo uusi viesti tunnisteella',
        'like_user' => 'Tykkää käyttäjästä',
        'follow_tags' => 'Seuraa tunnisteita',
        
        // Search
        'search_users' => 'Hae käyttäjiä',
        'search_posts' => 'Hae viestejä',
        'search_hashtags' => 'Hae aihetunnisteita',
        
        // Profile
        'user_profile' => 'Käyttäjäprofiili',
        'followed_hashtags' => 'Seuratut aihetunnisteet',
        'liked_users' => 'Tykätyt käyttäjät',
        'description' => 'Kuvaus',
        
        // Messages
        'welcome_to' => 'Tervetuloa sovellukseen',
        'loading' => 'Ladataan...',
        'error' => 'Virhe',
        'success' => 'Onnistui',
    ]
];

// Translation function
function translate($key, $lang = null) {
    global $translations, $default_language;
    
    // Use provided language or fall back to default
    $language = $lang ?: $default_language;
    
    // Return translation or fall back to English or the key itself
    return $translations[$language][$key] ?? $translations['en'][$key] ?? $key;
}

// Short alias for easier use
function t($key, $lang = null) {
    return translate($key, $lang);
}

// Set language based on user preference or browser
function set_language($lang = null) {
    global $default_language;
    
    if ($lang && in_array($lang, ['en', 'fi'])) {
        $default_language = $lang;
        $_SESSION['language'] = $lang;
    } elseif (isset($_SESSION['language'])) {
        $default_language = $_SESSION['language'];
    } elseif (isset($_SERVER['HTTP_ACCEPT_LANGUAGE'])) {
        // Auto-detect from browser
        $browser_lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);
        if ($browser_lang === 'fi') {
            $default_language = 'fi';
        }
    }
}

// Initialize language
if (session_status() == PHP_SESSION_NONE) {
    session_start();
}
set_language();
?>